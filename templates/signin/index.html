<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <title>signIn page</title>

    <style>
        * {
            margin: 0px;
        }

        .wrap {
            width: 95%;
            max-width: 500px;

            background-color: lightblue;

            margin: 150px auto;

            padding: 20px;

            text-align: center;
        }
        .wrap > h1 {
            margin-bottom: 20px;
        }

        .btn-box {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;

            margin-top: 20px;
        }
        .btn-box > button {
            width: 45%;
        }
        p {
            margin-top: 20px;
        }
    </style>

    <script>

        function login() {
            let userId = $('#user-id').val()
            let userPw = $('#user-pw').val()

            $.ajax({
                type: "GET",
                url: "/signin",
                data: {},
                success: function (response) {
                    let rows = response['users']

                    rows.forEach((row) => {
                        let Id = row.id
                        let Pw = row.password

                        if (userId === Id && userPw === Pw) {
                            return alert('로그인 성공!')
                        } else {
                            return alert('아이디와 비밀번호를 다시 확인해 주세요. 아이디가 없다면 회원가입을 해주세요')
                        }
                    })
                }
            });
        }

        function makeId(){
            window.location.href = "makeId"
        }

    </script>
</head>
<body>
<div class="wrap">
    <h1>로그인</h1>
    <div class="form-floating mb-3">
        <input id="user-id" type="email" class="form-control" id="floatingInput" placeholder="name@example.com">
        <label for="floatingInput">Input your ID</label>
    </div>
    <div class="form-floating">
        <input id="user-pw" type="password" class="form-control" id="floatingPassword" placeholder="Password">
        <label for="floatingPassword">Input your Password</label>
    </div>
    <div class="btn-box">
        <button onclick="login()" type="button" class="btn btn-dark">로그인</button>
        <button onclick="makeId()" type="button" class="btn btn-dark">회원가입</button>
    </div>
    <p>아직 ID가 없다면 회원가입을 해주세요!</p>
</div>
</body>
</html>